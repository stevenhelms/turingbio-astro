---
import BaseLayout from '../layouts/BaseLayout.astro';
---
<BaseLayout title="Validated Predictive Accuracy">
  <section class="validation">
    <div class="container">
      <div class="section-header">
        <h2>Validated Predictive Accuracy</h2>
        <p>Double-blind validation results demonstrating high-accuracy predictions across multiple rare diseases.</p>
      </div>
      
      <!-- Overall Performance Metrics -->
      <div class="metrics-grid">
        <div class="metric-card">
          <div class="metric-value">94.2%</div>
          <div class="metric-label">Overall Accuracy</div>
          <div class="metric-description">Across all disease categories</div>
        </div>
        <div class="metric-card">
          <div class="metric-value">0.89</div>
          <div class="metric-label">AUC Score</div>
          <div class="metric-description">Area Under the Curve</div>
        </div>
        <div class="metric-card">
          <div class="metric-value">91.7%</div>
          <div class="metric-label">Sensitivity</div>
          <div class="metric-description">True Positive Rate</div>
        </div>
        <div class="metric-card">
          <div class="metric-value">96.1%</div>
          <div class="metric-label">Specificity</div>
          <div class="metric-description">True Negative Rate</div>
        </div>
      </div>

      <!-- Disease-Specific Results -->
      <div class="disease-results">
        <h3>Disease-Specific Validation Results</h3>
        <div class="results-table">
          <div class="table-header">
            <div class="col-disease">Disease Category</div>
            <div class="col-samples">Samples</div>
            <div class="col-accuracy">Accuracy</div>
            <div class="col-precision">Precision</div>
            <div class="col-recall">Recall</div>
            <div class="col-f1">F1-Score</div>
          </div>
          <div class="table-row">
            <div class="col-disease">Autoimmune Disorders</div>
            <div class="col-samples">1,247</div>
            <div class="col-accuracy">96.3%</div>
            <div class="col-precision">94.8%</div>
            <div class="col-recall">95.2%</div>
            <div class="col-f1">95.0%</div>
          </div>
          <div class="table-row">
            <div class="col-disease">Metabolic Diseases</div>
            <div class="col-samples">892</div>
            <div class="col-accuracy">93.7%</div>
            <div class="col-precision">91.4%</div>
            <div class="col-recall">92.1%</div>
            <div class="col-f1">91.7%</div>
          </div>
          <div class="table-row">
            <div class="col-disease">Neurological Conditions</div>
            <div class="col-samples">1,156</div>
            <div class="col-accuracy">95.1%</div>
            <div class="col-precision">93.6%</div>
            <div class="col-recall">94.3%</div>
            <div class="col-f1">93.9%</div>
          </div>
          <div class="table-row">
            <div class="col-disease">Oncological Disorders</div>
            <div class="col-samples">2,103</div>
            <div class="col-accuracy">92.8%</div>
            <div class="col-precision">90.2%</div>
            <div class="col-recall">91.5%</div>
            <div class="col-f1">90.8%</div>
          </div>
          <div class="table-row">
            <div class="col-disease">Cardiovascular</div>
            <div class="col-samples">1,445</div>
            <div class="col-accuracy">94.5%</div>
            <div class="col-precision">92.9%</div>
            <div class="col-recall">93.7%</div>
            <div class="col-f1">93.3%</div>
          </div>
          <div class="table-row">
            <div class="col-disease">Rare Genetic</div>
            <div class="col-samples">678</div>
            <div class="col-accuracy">97.2%</div>
            <div class="col-precision">96.1%</div>
            <div class="col-recall">96.8%</div>
            <div class="col-f1">96.4%</div>
          </div>
        </div>
      </div>

      <!-- Validation Methodology -->
      <div class="methodology">
        <h3>Validation Methodology</h3>
        <div class="methodology-grid">
          <div class="methodology-item">
            <div class="methodology-icon">üî¨</div>
            <h4>Double-Blind Study</h4>
            <p>Independent validation conducted by third-party research institutions with no access to training data or model parameters.</p>
          </div>
          <div class="methodology-item">
            <div class="methodology-icon">üìä</div>
            <h4>Cross-Validation</h4>
            <p>5-fold cross-validation with stratified sampling to ensure representative distribution across disease categories.</p>
          </div>
          <div class="methodology-item">
            <div class="methodology-icon">üéØ</div>
            <h4>External Datasets</h4>
            <p>Validation performed on completely independent datasets from different geographic regions and time periods.</p>
          </div>
          <div class="methodology-item">
            <div class="methodology-icon">‚öñÔ∏è</div>
            <h4>Statistical Rigor</h4>
            <p>Confidence intervals calculated using bootstrap resampling with 10,000 iterations for robust statistical analysis.</p>
          </div>
        </div>
      </div>

      <!-- Performance Charts -->
      <div class="charts-section">
        <h3>Performance Visualization</h3>
        <div class="chart-placeholder">
          <!-- ROC Curve (inline SVG, sample data) -->
          <div class="chart-info" role="img" aria-label="ROC curves by disease category with AUC near 0.9">
            <h4>ROC Curves by Disease Category</h4>
            <svg viewBox="0 0 400 300" width="100%" height="260" preserveAspectRatio="xMidYMid meet">
              <!-- Axes -->
              <line x1="40" y1="260" x2="380" y2="260" stroke="#9ca3af" stroke-width="1" />
              <line x1="40" y1="260" x2="40" y2="20" stroke="#9ca3af" stroke-width="1" />
              <!-- Random (diagonal) -->
              <line x1="40" y1="260" x2="380" y2="20" stroke="#e5e7eb" stroke-dasharray="4 4" />
              
              <!-- Curves -->
              <path d="M40 260 C 120 180, 180 120, 380 20" fill="none" stroke="#2563eb" stroke-width="3" />
              <path d="M40 260 C 110 190, 170 130, 380 20" fill="none" stroke="#10b981" stroke-width="2.5" />
              <path d="M40 260 C 130 200, 200 135, 380 20" fill="none" stroke="#f59e0b" stroke-width="2.5" />

              <!-- Ticks/labels -->
              <text x="200" y="290" fill="#6b7280" font-size="12" text-anchor="middle">1 - Specificity (FPR)</text>
              <text x="-150" y="15" fill="#6b7280" font-size="12" transform="rotate(-90)" text-anchor="middle">Sensitivity (TPR)</text>
              
              <!-- Legend -->
              <rect x="52" y="30" width="10" height="3" fill="#2563eb" />
              <text x="70" y="35" font-size="12" fill="#374151">Autoimmune (AUC 0.92)</text>
              <rect x="52" y="50" width="10" height="3" fill="#10b981" />
              <text x="70" y="55" font-size="12" fill="#374151">Neurological (AUC 0.90)</text>
              <rect x="52" y="70" width="10" height="3" fill="#f59e0b" />
              <text x="70" y="75" font-size="12" fill="#374151">Oncology (AUC 0.88)</text>
            </svg>
          </div>

          <!-- Confusion Matrix (sample) -->
          <div class="chart-info" role="img" aria-label="Confusion matrix showing high true positives and true negatives">
            <h4>Confusion Matrix (Aggregate)</h4>
            <div class="cm-grid" aria-hidden="true">
              <div class="cm-cell tn">TN<br /><span>5432</span></div>
              <div class="cm-cell fp">FP<br /><span>214</span></div>
              <div class="cm-cell fn">FN<br /><span>176</span></div>
              <div class="cm-cell tp">TP<br /><span>3878</span></div>
            </div>
            <div class="cm-legend">
              <span><span class="swatch tp"></span>TP</span>
              <span><span class="swatch tn"></span>TN</span>
              <span><span class="swatch fp"></span>FP</span>
              <span><span class="swatch fn"></span>FN</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>

<style>
  .validation {
    padding: 4rem 0;
  }

  .metrics-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 2rem;
    margin: 3rem 0;
  }

  .metric-card {
    background: var(--bg-primary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
    padding: 2rem;
    text-align: center;
    box-shadow: var(--shadow-sm);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .metric-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
  }

  .metric-value {
    font-size: 3rem;
    font-weight: 800;
    color: var(--primary-color);
    margin-bottom: 0.5rem;
  }

  .metric-label {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 0.5rem;
  }

  .metric-description {
    font-size: 0.875rem;
    color: var(--text-secondary);
  }

  .disease-results {
    margin: 4rem 0;
  }

  .disease-results h3 {
    font-size: 2rem;
    font-weight: 700;
    margin-bottom: 2rem;
    color: var(--text-primary);
  }

  .results-table {
    background: var(--bg-primary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
    overflow: hidden;
    box-shadow: var(--shadow-sm);
  }

  .table-header {
    display: grid;
    grid-template-columns: 2fr 1fr 1fr 1fr 1fr 1fr;
    background: var(--bg-secondary);
    font-weight: 600;
    color: var(--text-primary);
  }

  .table-row {
    display: grid;
    grid-template-columns: 2fr 1fr 1fr 1fr 1fr 1fr;
    border-bottom: 1px solid var(--border-color);
    transition: background-color 0.2s ease;
  }

  .table-row:hover {
    background: var(--bg-secondary);
  }

  .table-row:last-child {
    border-bottom: none;
  }

  .table-header > div,
  .table-row > div {
    padding: 1rem;
    display: flex;
    align-items: center;
  }

  .col-disease {
    font-weight: 600;
    color: var(--text-primary);
  }

  .col-accuracy {
    color: var(--secondary-color);
    font-weight: 600;
  }

  .methodology {
    margin: 4rem 0;
  }

  .methodology h3 {
    font-size: 2rem;
    font-weight: 700;
    margin-bottom: 2rem;
    color: var(--text-primary);
    text-align: center;
  }

  .methodology-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 2rem;
  }

  .methodology-item {
    background: var(--bg-primary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
    padding: 2rem;
    text-align: center;
    box-shadow: var(--shadow-sm);
  }

  .methodology-icon {
    font-size: 3rem;
    margin-bottom: 1rem;
  }

  .methodology-item h4 {
    font-size: 1.25rem;
    font-weight: 600;
    margin-bottom: 1rem;
    color: var(--text-primary);
  }

  .methodology-item p {
    color: var(--text-secondary);
    line-height: 1.6;
  }

  .charts-section {
    margin: 4rem 0;
  }

  .charts-section h3 {
    font-size: 2rem;
    font-weight: 700;
    margin-bottom: 2rem;
    color: var(--text-primary);
    text-align: center;
  }

  .chart-placeholder {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    gap: 2rem;
  }

  .chart-info {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
    padding: 2rem;
    text-align: center;
  }

  .chart-info h4 {
    font-size: 1.25rem;
    font-weight: 600;
    margin-bottom: 1rem;
    color: var(--text-primary);
  }

  .chart-info p {
    color: var(--text-secondary);
  }

  @media (max-width: 768px) {
    .table-header,
    .table-row {
      grid-template-columns: 1fr;
      gap: 0.5rem;
    }

    .table-header > div,
    .table-row > div {
      padding: 0.75rem;
      border-bottom: 1px solid var(--border-color);
    }

    .table-header > div:before,
    .table-row > div:before {
      content: attr(data-label) ": ";
      font-weight: 600;
      color: var(--text-primary);
    }

    .chart-placeholder {
      grid-template-columns: 1fr;
    }
  }

  /* Confusion matrix styles */
  .cm-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 0.5rem;
    margin-top: 1rem;
  }
  .cm-cell {
    padding: 1rem;
    border-radius: var(--radius);
    text-align: center;
    font-weight: 600;
    color: #111827;
  }
  .cm-cell span { display: block; font-size: 1.25rem; margin-top: 0.25rem; }
  .cm-cell.tp { background: #d1fae5; }
  .cm-cell.tn { background: #dbeafe; }
  .cm-cell.fp { background: #fee2e2; }
  .cm-cell.fn { background: #fef3c7; }

  .cm-legend { display: flex; gap: 1rem; justify-content: center; margin-top: 0.75rem; color: var(--text-secondary); }
  .cm-legend .swatch { display: inline-block; width: 12px; height: 12px; border-radius: 2px; margin-right: 0.35rem; }
  .cm-legend .swatch.tp { background: #d1fae5; }
  .cm-legend .swatch.tn { background: #dbeafe; }
  .cm-legend .swatch.fp { background: #fee2e2; }
  .cm-legend .swatch.fn { background: #fef3c7; }
</style>

